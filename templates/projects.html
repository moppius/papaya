{% import "macros/page.html" as page_macros %}
{% extends "base.html" %}

{% block title %}{{ trans(key="projects", lang=lang) }} - {{ config.title }}{% endblock title %}

{% block ogp_head %}
    <meta property="og:title" content="{{ trans(key="projects", lang=lang) }} - {{ config.title }}">
    <meta property="og:type" content="website">
    <meta property="og:description" content="Things that I've created and games that I've worked on">
    <meta property="og:locale" content="{{ config.extra.ogp.locale }}">
    <meta property="og:url" content="{{ get_url(path='projects') | safe }}">
    <meta property="og:image" content="{{ get_url(path="/about/me.jpg") | safe }}">
{% endblock %}

{% block content %}
<main id="projects" tabindex="-1">
{% if section.extra.hide_project_categories %}
    {% for page in section.pages %}
        {{ page_macros::project_listing(page=page) }}
    {% endfor %}
{% else %}
    {% set project_categories = load_data(path="content/projects/categories." ~ lang ~ ".json", required=false) %}
    {% if not project_categories %}
        {% set project_categories = load_data(path="content/projects/categories.json") %}
    {% endif %}

    {% for category, tag in project_categories %}
        <h1>{{ category }}</h1>
        {% for page in section.pages %}
            {% if page.taxonomies.categories is containing(tag) %}
                {{ page_macros::project_listing(page=page) }}
            {% endif %}
        {% endfor %}
    {% endfor %}

    <h1>{{ trans(key="other", lang=lang) }}</h1>
    {% for page in section.pages %}
        {% if page.taxonomies.categories | length == 0 %}
            {{ page_macros::project_listing(page=page) }}
        {% endif %}
    {% endfor %}
{% endif %}

</main>
{% endblock content %}
